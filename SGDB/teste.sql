CREATE TABLE CLIENTE (
	ID			INTEGER NOT NULL,
	TX_NOME		TEXT NOT NULL,
	ID_STATUS	INTEGER NOT NULL,
	TX_APELIDO	TEXT NOT NULL,
	TX_SENHA	TEXT NOT NULL,
	CONSTRAINT "PK_CLIENTE" PRIMARY KEY("ID")
);

INSERT INTO CLIENTE (ID, TX_NOME, ID_STATUS, TX_APELIDO, TX_SENHA) 
VALUES (1, 'Bernardo', true, 'Tinico', 'SenhaBoa'),
       (2, 'Leonardo', false, 'Leo', 'SenhaRuim');
        
SELECT * from CLIENTE;

CREATE TABLE "TREINO" (
	"ID"	INTEGER NOT NULL,
	"TX_DESCRICAO"	TEXT NOT NULL,
	"TX_MODULO"	TEXT NOT NULL,
	"TX_TIPO"	TEXT NOT NULL,
	"TX_LOCALIZADO"	TEXT NOT NULL,
	"NR_DURACAO"	INTEGER NOT NULL,
	"NR_REPETICAO"	INTEGER NOT NULL,
	"NR_ORDEM"	INTEGER NOT NULL,
	CONSTRAINT "PK_TREINO" PRIMARY KEY("ID")
);
	
INSERT INTO TREINO (ID, TX_DESCRICAO, TX_MODULO, TX_TIPO, TX_LOCALIZADO, NR_DURACAO, NR_REPETICAO, NR_ORDEM)
VALUES (1,'Abrir e fechar braços na linha dos ombro. Braços para cima e para baixo. Girar braços para frente e para trás. Repetições em cada sentido', 
       'Módulo 1', 'Aquecimento', 'Ombro', 10, 3, 1),
       (2,'Mobilidade de ombro com corda ou teraband (Girar ombros - Circundução)', 
       'Módulo 1', 'Aquecimento', 'Ombro', 10, 1, 2),
       (3, 'Travessia Livre Ida e Volta Vert/Neg Leve ou Mezanino (Triangulações + Braços estendidos)', 
       'Módulo 1', 'Desenvolvimento', '-', 30, 2, 3);

SELECT * FROM TREINO;

CREATE TABLE "PROGRAMACAO" (
	"ID"	INTEGER NOT NULL,
	"ID_CLIENTE"	INTEGER NOT NULL,
	"ID_TREINO"	INTEGER NOT NULL,
	"DT_INICIO"	INTEGER NOT NULL,
	"DT_FINAL"	INTEGER NOT NULL,
	CONSTRAINT "PK_PROGRAMACAO" PRIMARY KEY("ID"),
	CONSTRAINT "AK_PROGRAMACAO" UNIQUE("ID_CLIENTE","ID_TREINO","DT_INICIO","DT_FINAL"),
	CONSTRAINT "PROG_CLIENTES" FOREIGN KEY("ID_CLIENTE") REFERENCES "CLIENTE"("ID"),
	CONSTRAINT "PROG_TREINOS" FOREIGN KEY("ID_TREINO") REFERENCES "TREINO"("ID")
);
		
INSERT INTO PROGRAMACAO (ID, ID_CLIENTE, ID_TREINO, DT_INICIO, DT_FINAL)  
values (1, 1, 1, '2025-01-01', '2025-02-28'),
       (2, 1, 2, '2025-01-01', '2025-02-28'),
       (3, 1, 3, '2025-01-01', '2025-02-28'),
       (4, 2, 1, '2025-02-01', '2025-03-31'),
       (5, 2, 2, '2025-02-01', '2025-03-31'),
       (6, 2, 3, '2025-02-01', '2025-03-31');
       
SELECT B.TX_NOME, C.TX_MODULO, C.TX_TIPO, C.TX_DESCRICAO , A.DT_INICIO, A.DT_FINAL
FROM PROGRAMACAO A 
INNER JOIN  CLIENTE B ON A.ID_CLIENTE = B.ID
INNER JOIN  TREINO  C ON A.ID_TREINO =  C.ID;

CREATE TABLE "EXECUCAO" (
	"ID"	INTEGER NOT NULL,
	"ID_CLIENTE"	INTEGER NOT NULL,
	"ID_TREINO"	INTEGER NOT NULL,
	"DT_REGISTRO"	INTEGER NOT NULL,
	"IN_STATUS"	INTEGER NOT NULL,
	CONSTRAINT "PK_EXECUCAO" PRIMARY KEY("ID"),
	CONSTRAINT "AK_EXECUCAO" UNIQUE("ID_CLIENTE","ID_TREINO","DT_REGISTRO"),
	CONSTRAINT "EXECUCAO_CLIENTES" FOREIGN KEY("ID_CLIENTE") REFERENCES "EXECUCAO"("ID"),
	CONSTRAINT "EXECUCAO_TREINOS" FOREIGN KEY("ID_TREINO") REFERENCES "TREINO"("ID")
);

INSERT INTO EXECUCAO (ID, ID_CLIENTE, ID_TREINO, DT_REGISTRO, IN_STATUS)
VALUES (1, 1, 1, '2025-01-07', TRUE),
       (2, 1, 2, '2025-01-09', TRUE),
       (3, 1, 3, '2025-01-13', TRUE),
       (4, 2, 1, '2025-02-25', TRUE),
       (5, 2, 2, '2025-02-27', TRUE),
       (6, 2, 3, '2025-03-01', TRUE);

SELECT B.TX_APELIDO, C.TX_MODULO, C.TX_TIPO, C.TX_DESCRICAO , A.DT_REGISTRO, A.IN_STATUS
FROM EXECUCAO A 
INNER JOIN  CLIENTE B ON A.ID_CLIENTE = B.ID
INNER JOIN  TREINO  C ON A.ID_TREINO =  C.ID;

CREATE TABLE "FEEDBACK" (
	"ID"	INTEGER NOT NULL,
	"ID_EXECUCAO"	INTEGER NOT NULL,
	"ID_CLIENTE"	INTEGER NOT NULL,
	"DT_REGISTRO"	INTEGER NOT NULL,
	"TX_DESCRICAO"	TEXT NOT NULL,
	"NR_NOTA"	INTEGER NOT NULL,
	CONSTRAINT "PK_FEEDBACK" PRIMARY KEY("ID"),
	CONSTRAINT "AK_FEEDBACK" UNIQUE("ID_EXECUCAO","ID_CLIENTE","DT_REGISTRO"),
	CONSTRAINT "FEEDBACK_CLIENTES" FOREIGN KEY("ID_CLIENTE") REFERENCES "CLIENTE"("ID"),
	CONSTRAINT "FEEDBACK_EXECUCOES" FOREIGN KEY("ID_EXECUCAO") REFERENCES "EXECUCAO"("ID")
);
		
INSERT INTO FEEDBACK (ID, ID_EXECUCAO, ID_CLIENTE, DT_REGISTRO, TX_DESCRICAO, NR_NOTA)
VALUES (1, 1, 1, '2025-01-07', 'Legal', 9),
       (2, 2, 1, '2025-01-09', 'Bom', 6),
       (3, 3, 1, '2025-01-13', 'Cansativo', 4),
       (4, 4, 2, '2025-02-25', 'Ótimo', 10),
       (5, 5, 2, '2025-02-27', 'Ok', 5),
       (6, 6, 2, '2025-03-01', 'Muito Bom', 7);
 
SELECT B.TX_NOME, D.TX_MODULO, D.TX_TIPO, D.TX_DESCRICAO, A.TX_DESCRICAO , A.DT_REGISTRO, A.NR_NOTA
FROM FEEDBACK A 
INNER JOIN  CLIENTE  B ON A.ID_CLIENTE  = B.ID
INNER JOIN  EXECUCAO C ON A.ID_EXECUCAO = C.ID 
INNER JOIN  TREINO   D ON C.ID_TREINO   =  D.ID;
